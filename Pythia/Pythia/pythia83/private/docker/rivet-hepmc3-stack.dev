# Base on ubuntu
FROM ubuntu:latest

# Set some environment variables
ENV DEBIAN_FRONTEND=noninteractive \
    TERM=xterm \
    BUILD=/root/build \
    INSTALL_PREFIX=/root/install \
    PYTHIA_PREFIX=/root/pythia \
    PYTHIA_VERSION=pythia8302 \
    PYTHIA_URL=http://home.thep.lu.se/~torbjorn/pythia8/ \
    MAKE="make -j64" \
    BOOTSTRAP=https://gitlab.com/hepcedar/rivetbootstrap/raw/3.1.2/rivet-bootstrap

# Install system tools
RUN apt-get update && apt-get install -y apt-utils

# Install platform tools
RUN apt-get install -y \
    vim \
    wget \
    time \
    gcc \
    g++ \
    python \
    python-dev \
    cmake \
    zlib1g-dev 

# Run the Rivet bootstrap script
RUN rm -rf $INSTALL_PREFIX $BUILD && \
    mkdir -p $INSTALL_PREFIX && \
    mkdir -p  $BUILD && \
    cd $BUILD && \
    wget $BOOTSTRAP && \
    chmod +x rivet-bootstrap && \
    export HEPMC_VERSION="3.2.2" && \
    ./rivet-bootstrap 

# Install Pythia
#RUN rm -rf $PYTHIA_PREFIX && \
#    mkdir $PYTHIA_PREFIX && \
#    cd $PYTHIA_PREFIX && \
#    wget $PYTHIA_URL$PYTHIA_VERSION\.tgz && \
#    tar xf $PYTHIA_VERSION\.tgz && \
#    cd $PYTHIA_VERSION && \
#    ./configure --with-rivet=$INSTALL_PREFIX && \    
#    $MAKE && \
#    cd examples/ && \
#    make main01 && ./main01
