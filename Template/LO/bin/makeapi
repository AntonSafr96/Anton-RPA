#!/bin/bash
#
#  Makes necessary files to run the API
#
#  Usage: makeapi
#
#  
#   First we need to get into the main directory
#
if [[  ! -d ./bin  ]]; then
    cd ../
    if [[ ! -d ./bin ]]; then
	echo "Error: survey must be executed from the main, or bin directory"
	exit
    fi
fi
if [[ -d Source ]]; then
    cd Source
    echo "Cleaning Source:"
    make clean >& /dev/null
    echo "Make Source:"
    make
    cd ../
else
    echo "Error could not find Source"
    exit
fi
if [[ -d SubProcesses ]]; then
    cd SubProcesses
    echo -n "Making SubProcesses-API:"
    for i in `cat subproc.mg` ; do
	cd $i
	echo -n "."
	make madevent_vec.so
	cd ..
    done
    echo " "
    cd ../
else
    echo "Error could not find SubProcesses"
    exit
fi
